[debug] [2017-10-23T04:07:45.518Z] ----------------------------------------------------------------------
[debug] [2017-10-23T04:07:45.519Z] Command:       /Users/lok/.nvm/versions/node/v8.0.0/bin/node /Users/lok/.nvm/versions/node/v8.0.0/bin/firebase deploy --only functions
[debug] [2017-10-23T04:07:45.519Z] CLI Version:   3.12.0
[debug] [2017-10-23T04:07:45.519Z] Platform:      darwin
[debug] [2017-10-23T04:07:45.520Z] Node Version:  v8.0.0
[debug] [2017-10-23T04:07:45.520Z] Time:          Mon Oct 23 2017 12:07:45 GMT+0800 (HKT)
[debug] [2017-10-23T04:07:45.520Z] ----------------------------------------------------------------------
[debug] 
[debug] [2017-10-23T04:07:45.532Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2017-10-23T04:07:45.533Z] > authorizing via signed-in user
[debug] [2017-10-23T04:07:45.534Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/loklok-fbia  
 Mon Oct 23 2017 12:07:45 GMT+0800 (HKT)
[debug] [2017-10-23T04:07:47.123Z] <<< HTTP RESPONSE 200
[debug] [2017-10-23T04:07:47.124Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/loklok-fbia/tokens  
 Mon Oct 23 2017 12:07:47 GMT+0800 (HKT)
[debug] [2017-10-23T04:07:48.105Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'loklok-fbia'...
[info] 
[info] i  deploying functions
[debug] [2017-10-23T04:07:49.876Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "dependencies": {
    "firebase-admin": "~5.2.1",
    "firebase-functions": "^0.6.2"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[info] i  runtimeconfig: ensuring necessary APIs are enabled...
[debug] [2017-10-23T04:07:49.877Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/loklok-fbia?view=CONSUMER_VIEW  
 Mon Oct 23 2017 12:07:49 GMT+0800 (HKT)
[debug] [2017-10-23T04:07:49.877Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/loklok-fbia?view=CONSUMER_VIEW  
 Mon Oct 23 2017 12:07:49 GMT+0800 (HKT)
[debug] [2017-10-23T04:07:51.279Z] <<< HTTP RESPONSE 200
[info] ✔  runtimeconfig: all necessary APIs are enabled
[debug] [2017-10-23T04:07:51.291Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2017-10-23T04:07:51.292Z] >>> HTTP REQUEST GET https://appengine.googleapis.com/v1/apps/loklok-fbia  
 Mon Oct 23 2017 12:07:51 GMT+0800 (HKT)
[debug] [2017-10-23T04:07:51.293Z] >>> HTTP REQUEST GET https://apikeys.googleapis.com/v1/projects/loklok-fbia/apiKeys  
 Mon Oct 23 2017 12:07:51 GMT+0800 (HKT)
[debug] [2017-10-23T04:07:52.504Z] <<< HTTP RESPONSE 200
[debug] [2017-10-23T04:07:52.507Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2017-10-23T04:07:55.666Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/loklok-fbia/configs  
 Mon Oct 23 2017 12:07:55 GMT+0800 (HKT)
[debug] [2017-10-23T04:07:56.114Z] <<< HTTP RESPONSE 200
[debug] [2017-10-23T04:07:56.351Z] TypeError: Cannot read property 'pipesCount' of undefined
    at module.exports.Readable.pipe (_stream_readable.js:545:16)
    at module.exports.ZipArchiveOutputStream._smartStream (/Users/lok/.nvm/versions/node/v8.0.0/lib/node_modules/firebase-tools/node_modules/compress-commons/lib/archivers/zip/zip-archive-output-stream.js:171:11)
    at module.exports.ZipArchiveOutputStream._appendStream (/Users/lok/.nvm/versions/node/v8.0.0/lib/node_modules/firebase-tools/node_modules/compress-commons/lib/archivers/zip/zip-archive-output-stream.js:94:20)
    at module.exports.ArchiveOutputStream.entry (/Users/lok/.nvm/versions/node/v8.0.0/lib/node_modules/firebase-tools/node_modules/compress-commons/lib/archivers/archive-output-stream.js:89:10)
    at module.exports.ZipStream.entry (/Users/lok/.nvm/versions/node/v8.0.0/lib/node_modules/firebase-tools/node_modules/zip-stream/lib/zip-stream.js:105:49)
    at module.exports.Zip.append (/Users/lok/.nvm/versions/node/v8.0.0/lib/node_modules/firebase-tools/node_modules/archiver/lib/plugins/zip.js:30:15)
    at module.exports.Archiver._moduleAppend (/Users/lok/.nvm/versions/node/v8.0.0/lib/node_modules/firebase-tools/node_modules/archiver/lib/core.js:123:16)
    at module.exports.Archiver._onQueueTask (/Users/lok/.nvm/versions/node/v8.0.0/lib/node_modules/firebase-tools/node_modules/archiver/lib/core.js:246:8)
    at /Users/lok/.nvm/versions/node/v8.0.0/lib/node_modules/firebase-tools/node_modules/archiver/node_modules/async/lib/async.js:945:13
    at Immediate.process [as _onImmediate] (/Users/lok/.nvm/versions/node/v8.0.0/lib/node_modules/firebase-tools/node_modules/archiver/node_modules/async/lib/async.js:913:25)
[error] 
[error] Error: An unexpected error has occurred.
